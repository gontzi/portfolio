---
import portfolioData from "../data/portfolio.json";
const { contact, personal } = portfolioData;
---

<section id="contact" class="section">
  <div class="container">
    <div class="section-grid">
      <h2 class="section-title">{contact.title}</h2>
      <div class="section-content">
        <p class="contact-message fade-in">{contact.message}</p>

        <div class="contact-details">
          <a href={`mailto:${personal.email}`} class="contact-email fade-in"
            >{personal.email}</a
          >

          <div class="google-calendar-container fade-in">
            <div id="google-calendar-button"></div>
          </div>

          <p class="calendar-fallback fade-in">
            ¿Problemas con el calendario?
            <a
              href="https://ka0s.site/reservas"
              target="_blank"
              class="fallback-link">Usa este enlace directo</a
            >
          </p>
        </div>

        <div class="contact-social-box fade-in">
          <h4 class="social-label">Encuéntrame en:</h4>
          <div class="contact-social">
            <a
              href={personal.social.linkedin}
              target="_blank"
              class="social-link">LinkedIn</a
            >
            <a href={personal.social.github} target="_blank" class="social-link"
              >GitHub</a
            >
            <a href={personal.social.malt} target="_blank" class="social-link"
              >Malt</a
            >
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<style>
  .contact-message {
    font-size: 1.5em;
    font-family: var(--font-heading);
    color: var(--text-main);
    margin-bottom: 3rem;
    line-height: 1.4;
  }

  .contact-details {
    margin-bottom: 4rem;
  }

  .contact-email {
    font-size: 2em;
    color: var(--text-main);
    font-family: var(--font-body);
    font-weight: 700;
    text-decoration: underline;
    text-decoration-color: var(--accent);
    text-underline-offset: 8px;
    margin-bottom: 3rem;
    display: inline-block;
    transition: all 0.3s ease;
  }

  .contact-email:hover {
    color: var(--accent);
    text-decoration-color: var(--text-main);
  }

  .google-calendar-container {
    margin-bottom: 1.5rem;
    display: flex;
    justify-content: flex-start;
  }

  .calendar-fallback {
    color: var(--text-muted);
    font-size: 0.85em;
    margin-bottom: 3rem;
    font-family: var(--font-body);
  }

  .fallback-link {
    color: var(--text-main);
    font-weight: 600;
    text-decoration: underline;
  }

  .contact-social-box {
    border-top: 2px solid var(--text-main);
    padding-top: 2rem;
  }

  .social-label {
    font-family: var(--font-body);
    font-size: 0.8em;
    text-transform: uppercase;
    letter-spacing: 0.1em;
    color: var(--text-muted);
    margin-bottom: 1rem;
  }

  .contact-social {
    display: flex;
    gap: 2.5rem;
  }

  .social-link {
    color: var(--text-main);
    text-decoration: none;
    font-size: 1em;
    font-weight: 600;
    font-family: var(--font-body);
    transition: color 0.3s ease;
    position: relative;
  }

  .social-link::after {
    content: "";
    position: absolute;
    width: 100%;
    height: 2px;
    bottom: -4px;
    left: 0;
    background: var(--accent);
    transform: scaleX(0);
    transform-origin: right;
    transition: transform 0.3s ease;
  }

  .social-link:hover::after {
    transform: scaleX(1);
    transform-origin: left;
  }

  @media (max-width: 768px) {
    .contact-email {
      font-size: 1.25em;
    }

    .contact-social {
      flex-wrap: wrap;
      gap: 1.5rem;
    }
  }
</style>

<!-- Google Calendar Appointment Scheduling begin -->
<link
  href="https://calendar.google.com/calendar/scheduling-button-script.css"
  rel="stylesheet"
/>
<script
  src="https://calendar.google.com/calendar/scheduling-button-script.js"
  async></script>
<script>
  (function () {
    window.addEventListener("load", function () {
      // @ts-ignore
      calendar.schedulingButton.load({
        url: "https://calendar.google.com/calendar/appointments/schedules/AcZssZ1QF1BIcez4Jt9OWjC8hrZd7a34UfemQncXGpb1P-g7RRPvegXfnJFlihzR-x_ujcx68apg_LlY?gv=true",
        color: "#1A2C38", // Navy
        label: "Reservar una cita",
        target: document.getElementById("google-calendar-button"),
      });

      setTimeout(() => {
        const container = document.getElementById("google-calendar-button");
        if (container && container.nextElementSibling) {
          const button = container.nextElementSibling as HTMLElement;

          button.style.backgroundColor = "#1A2C38"; // Navy
          button.style.color = "#F3F0E7"; // Cream
          button.style.border = "2px solid #1A2C38";
          button.style.padding = "16px 32px";
          button.style.fontSize = "0.9em";
          button.style.textTransform = "uppercase";
          button.style.fontWeight = "700";
          button.style.borderRadius = "4px";
          button.style.boxShadow = "4px 4px 0px #E3A83F"; // Mustard shadow
          button.style.transition = "all 0.2s ease";

          button.addEventListener("mouseenter", () => {
            button.style.transform = "translate(2px, 2px)";
            button.style.boxShadow = "2px 2px 0px #E3A83F";
          });

          button.addEventListener("mouseleave", () => {
            button.style.transform = "translate(0, 0)";
            button.style.boxShadow = "4px 4px 0px #E3A83F";
          });
        }
      }, 500);
    });
  })();
</script>
